<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Database</title>
    <script type="module">
        // ðŸ”¹ Firebase SDK importeren
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, updateDoc, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // ðŸ”¹ Firebase-configuratie (VERVANG MET JE EIGEN CONFIG!)
        const firebaseConfig = {
            apiKey: "AIzaSyBb1I4awMXcV3Z6IttlDK6jBXY6XYcsU6I",
            authDomain: "timssfoms.firebaseapp.com",
            projectId: "timssfoms",
            storageBucket: "timssfoms.firebasestorage.app",
            messagingSenderId: "30802637926",
            appId: "1:30802637926:web:9fbd24b77d5dbc06b1a9a7"
        };

        // ðŸ”¹ Firebase initialiseren
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ðŸ”¹ Database laden en tonen
        async function loadDatabase() {
            const querySnapshot = await getDocs(collection(db, "records"));
            let data = [];
            querySnapshot.forEach((doc) => {
                let item = doc.data();
                item.id = doc.id;
                data.push(item);
            });
            displayRecords(data);
        }

        // ðŸ”¹ Records tonen in de tabel
        function displayRecords(data) {
            let table = document.getElementById('database');
            table.innerHTML = '';
            data.forEach((item) => {
                let row = `<tr>
                    <td>${item.name}</td>
                    <td>${item.description}</td>
                    <td><a href="${item.link}" target="_blank">${item.link}</a></td>
                    <td>
                        <button onclick="editRecord('${item.id}')">Bewerken</button>
                        <button onclick="deleteRecord('${item.id}')">Verwijderen</button>
                    </td>
                </tr>`;
                table.innerHTML += row;
            });
        }

        // ðŸ”¹ Nieuw record toevoegen
        window.addRecord = async function () {
            let name = document.getElementById('name').value;
            let description = document.getElementById('description').value;
            let link = document.getElementById('link').value;

            if (name && description && link) {
                await addDoc(collection(db, "records"), {
                    name: name,
                    description: description,
                    link: link
                });
                document.getElementById('name').value = '';
                document.getElementById('description').value = '';
                document.getElementById('link').value = '';
                loadDatabase();
            }
        };

        // ðŸ”¹ Record bewerken
        window.editRecord = async function (id) {
            let newName = prompt("Nieuwe naam:");
            let newDescription = prompt("Nieuwe beschrijving:");
            let newLink = prompt("Nieuwe link:");

            if (newName !== null && newDescription !== null && newLink !== null) {
                const recordRef = doc(db, "records", id);
                await updateDoc(recordRef, {
                    name: newName,
                    description: newDescription,
                    link: newLink
                });
                loadDatabase();
            }
        };

        // ðŸ”¹ Record verwijderen
        window.deleteRecord = async function (id) {
            await deleteDoc(doc(db, "records", id));
            loadDatabase();
        };

        // ðŸ”¹ Zoekfunctie
        window.searchRecords = async function () {
            let query = document.getElementById('search').value.toLowerCase();
            const querySnapshot = await getDocs(collection(db, "records"));
            let filteredData = [];
            querySnapshot.forEach((doc) => {
                let item = doc.data();
                item.id = doc.id;
                if (item.name.toLowerCase().includes(query) || 
                    item.description.toLowerCase().includes(query) || 
                    item.link.toLowerCase().includes(query)) {
                    filteredData.push(item);
                }
            });
            displayRecords(filteredData);
        };

        // ðŸ”¹ Laad database bij het openen van de pagina
        window.onload = loadDatabase;
    </script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        input, button { margin: 5px; padding: 5px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 8px; text-align: left; border-bottom: 1px solid #ddd; }
        a { color: blue; text-decoration: none; }
    </style>
</head>
<body>
    <h2>Firebase Database</h2>
    <input type="text" id="search" placeholder="Zoek..." onkeyup="searchRecords()">
    <input type="text" id="name" placeholder="Naam">
    <input type="text" id="description" placeholder="Beschrijving">
    <input type="text" id="link" placeholder="Link (https://...)">
    <button onclick="addRecord()">Toevoegen</button>
    <table>
        <thead>
            <tr>
                <th>Naam</th>
                <th>Beschrijving</th>
                <th>Link</th>
                <th>Acties</th>
            </tr>
        </thead>
        <tbody id="database"></tbody>
    </table>
</body>
</html>

